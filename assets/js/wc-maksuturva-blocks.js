(()=>{"use strict";const e=window.React,t=wc.wcBlocksRegistry,n=wc.wcSettings,a=window.wp.htmlEntities,s=window.wp.element,l=(0,n.getSetting)("paymentMethodData",{}).WC_Gateway_Maksuturva||{},o=(0,a.decodeEntities)(l.title)||"Svea",r=t=>{const{eventRegistration:n,emitResponse:o}=t,{onPaymentSetup:r}=n,[c,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{const e=r(async()=>c?{type:o.responseTypes.SUCCESS,meta:{paymentMethodData:{svea_payment_method:c}}}:{type:o.responseTypes.ERROR,message:"Please select a payment method."});return()=>{e()}},[o.responseTypes.ERROR,o.responseTypes.SUCCESS,r,c]),(0,s.useEffect)(()=>{c&&window.wc&&window.wc.blocksCheckout&&window.wc.blocksCheckout.extensionCartUpdate&&window.wc.blocksCheckout.extensionCartUpdate({namespace:"svea_payments_update",data:{payment_method:c}})},[c]),l.groups&&0!==l.groups.length?(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"svea-payment-methods-container"},l.groups.map((t,n)=>(0,e.createElement)("fieldset",{key:n,style:{border:"none",margin:0,padding:0,marginTop:"10px"}},(0,e.createElement)("legend",{className:"svea-payment-collated-title",style:{fontSize:"1em",fontWeight:"bold",marginBottom:"10px"}},(0,a.decodeEntities)(t.title)),(0,e.createElement)("div",{className:"svea-payment-methods-list",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"}},t.methods.map(t=>{const n=(e=>{if(!l.handling_costs)return null;const t=l.handling_costs.find(t=>t.payment_method_type===e);return t?t.handling_cost_amount:null})(t.code),s=c===t.code;return(0,e.createElement)("div",{key:t.code,className:"svea-payment-method-select "+(s?"selected":""),style:{cursor:"pointer",border:s?"2px solid #007cba":"1px solid #ddd",padding:"10px",borderRadius:"4px",backgroundColor:s?"#f0f0f1":"#fff",transition:"all 0.2s ease",opacity:s?1:.8,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100px"},onClick:()=>i(t.code),onMouseEnter:e=>{s||(e.currentTarget.style.borderColor="#999",e.currentTarget.style.opacity=1)},onMouseLeave:e=>{s||(e.currentTarget.style.borderColor="#ddd",e.currentTarget.style.opacity=.8)}},(0,e.createElement)("label",{htmlFor:`svea_payment_method_${t.code}`,style:{cursor:"pointer",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,margin:0}},t.imageurl?(0,e.createElement)("img",{src:t.imageurl,alt:t.displayname,style:{display:"block",maxWidth:"100%",maxHeight:"90%"}}):(0,e.createElement)("span",{style:{display:"block",textAlign:"center",padding:"10px"}},(0,a.decodeEntities)(t.displayname))),n&&(0,e.createElement)("div",{className:"handling-cost-amount",style:{textAlign:"center",fontSize:"0.9em",color:"#666",marginTop:"5px"}},"+",parseFloat(n).toFixed(2).replace(".",",")," ",(0,a.decodeEntities)(l.currency_symbol)),(0,e.createElement)("input",{className:"input-radio svea-payment-method-select-radio",type:"radio",id:`svea_payment_method_${t.code}`,name:"svea_payment_method",value:t.code,checked:s,onChange:()=>i(t.code),style:{display:"none"}}))}))))),l.terms&&l.terms.text&&(0,e.createElement)("p",null,(0,a.decodeEntities)(l.terms.text),l.terms.url&&(0,e.createElement)(e.Fragment,null," (",(0,e.createElement)("a",{href:l.terms.url,target:"_blank"},"PDF"),")")),(0,e.createElement)("div",{style:{clear:"both"}})):(0,e.createElement)("div",null,(0,a.decodeEntities)(l.description||""))};(0,t.registerPaymentMethod)({name:"WC_Gateway_Maksuturva",label:(0,e.createElement)(t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:o})},null),content:(0,e.createElement)(r,null),edit:(0,e.createElement)(r,null),canMakePayment:()=>!0,ariaLabel:o,supports:{features:l.supports}})})();